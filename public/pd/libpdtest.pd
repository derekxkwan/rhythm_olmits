#N canvas 322 117 693 474 12;
#N canvas 1052 114 591 444 ipt 0;
#X obj 51 211 bonk~;
#X obj 91 253 list split 2;
#X obj 91 278 list split 1;
#X obj 57 318 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000;
#X obj 17 103 adc~ 1, f 7;
#X obj 90 36 loadbang;
#X obj 212 40 r \$0-maxvel;
#X obj 172 384 s \$0-outvel;
#X obj 113 411 outlet;
#X obj 133 345 t f f;
#X obj 90 88 f 50;
#X obj 338 165 r \$0-kybd-tgl;
#X obj 336 220 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 0 1;
#X obj 415 191 loadbang;
#X msg 415 216 0;
#X obj 230 184 == 0;
#X obj 130 307 spigot 1;
#X obj 273 273 spigot 0;
#X obj 262 236 r \$0-key;
#X msg 84 140 thresh 2.5 15 \, minvel \$1 \, attack-frames 1;
#X connect 0 0 3 0;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 1 16 0;
#X connect 4 0 0 0;
#X connect 5 0 10 0;
#X connect 6 0 10 0;
#X connect 9 0 8 0;
#X connect 9 1 7 0;
#X connect 10 0 19 0;
#X connect 11 0 12 0;
#X connect 12 0 15 0;
#X connect 12 0 17 1;
#X connect 13 0 14 0;
#X connect 14 0 12 0;
#X connect 15 0 16 1;
#X connect 16 0 9 0;
#X connect 17 0 8 0;
#X connect 18 0 17 0;
#X connect 19 0 0 0;
#X restore 28 13 pd ipt;
#N canvas 801 90 660 945 seq 0;
#X obj 139 155 ext/dkbpmtoms;
#X msg 143 191 tempo \$1 msec;
#X obj 44 277 metro;
#X obj 260 34 loadbang;
#X obj 189 105 f 120;
#X obj 359 42 r \$0-bpm;
#X obj 57 397 t b b;
#X obj 37 46 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000
0 1;
#X msg 514 214 clear;
#X obj 107 133 sel 0;
#X obj 75 219 sel 1;
#X obj 27 841 outlet~;
#X obj 152 844 outlet~;
#X obj 192 48 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000;
#N canvas 1098 163 630 589 countin-helper 0;
#X obj 118 144 f;
#X msg 171 120 0;
#X obj 118 191 t f f;
#X obj 178 183 + 1;
#X obj 196 31 inlet;
#X obj 346 25 inlet;
#X text 410 35 reset;
#X obj 54 25 inlet;
#X obj 48 466 outlet;
#X obj 231 334 spigot;
#X obj 275 295 f;
#X obj 231 359 t b b;
#X text 295 351 only output list first time;
#X msg 291 403 0;
#X msg 327 118 1;
#X obj 54 50 t b b;
#X obj 126 473 outlet;
#X text 242 40 countin;
#X obj 115 233 moses 0;
#X connect 0 0 2 0;
#X connect 1 0 0 1;
#X connect 2 0 18 0;
#X connect 2 1 3 0;
#X connect 3 0 0 1;
#X connect 4 0 18 1;
#X connect 5 0 1 0;
#X connect 5 0 14 0;
#X connect 7 0 15 0;
#X connect 9 0 11 0;
#X connect 10 0 9 1;
#X connect 11 0 16 0;
#X connect 11 1 13 0;
#X connect 13 0 10 0;
#X connect 14 0 10 0;
#X connect 15 0 8 0;
#X connect 15 1 0 0;
#X connect 18 1 9 0;
#X restore 45 357 pd countin-helper;
#X obj 133 274 r \$0-countin;
#X obj 133 299 f 0, f 5;
#X obj 34 91 t f f f, f 15;
#X obj 257 371 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc
#000000 #000000;
#X obj 328 244 hradio 15 1 0 8 empty empty empty 0 -8 0 10 #fcfcfc
#000000 #000000 0;
#X obj 140 683 ext/dksd1~;
#X obj 134 756 *~ 1;
#X obj 281 672 r \$0-drumvol;
#N canvas 824 318 876 596 mycounter 0;
#X obj 658 23 inlet;
#X text 707 25 reset;
#X obj 161 139 ext/dkvanctr 4;
#X obj 149 261 sel 0;
#X obj 161 164 t f f;
#X obj 191 190 s \$0-count;
#X obj 140 376 vline~;
#X obj 138 299 t b b;
#X obj 210 287 t b b;
#X obj 321 325 f 2000;
#X obj 396 323 f 1000;
#X obj 321 350 f;
#X obj 321 375 osc~;
#X obj 147 408 *~;
#X obj 148 512 *~ 1;
#X msg 147 348 0 0 \, 1 3 0 \, 0 75 5;
#X obj 199 489 r \$0-clickvol;
#X obj 141 36 inlet;
#X obj 219 59 r \$0-meter;
#X obj 219 84 f 4;
#X obj 148 537 outlet~;
#X obj 495 144 r \$0-metroduring;
#X obj 503 208 f 1;
#X obj 615 68 loadbang;
#X obj 381 43 inlet;
#X text 429 46 rhythm start;
#X obj 447 272 ||;
#X msg 450 117 1;
#X obj 381 68 bang;
#X msg 407 125 0;
#X obj 611 110 t b b;
#X obj 726 53 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000;
#X obj 149 229 spigot;
#X obj 612 243 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 0 1;
#X text 501 285 play metro during rhythm playback;
#X obj 559 371 phasor~ 1000;
#X obj 402 384 vline~;
#X obj 409 416 *~;
#X msg 409 356 0 0 \, 1 3 0 \, 0 75 5;
#X obj 409 442 *~ 0.5;
#X obj 147 433 +~;
#X connect 0 0 2 3;
#X connect 0 0 27 0;
#X connect 2 0 4 0;
#X connect 3 0 7 0;
#X connect 3 1 8 0;
#X connect 4 0 32 0;
#X connect 4 1 5 0;
#X connect 6 0 13 0;
#X connect 7 0 15 0;
#X connect 7 1 9 0;
#X connect 8 0 15 0;
#X connect 8 1 10 0;
#X connect 9 0 11 0;
#X connect 10 0 11 0;
#X connect 11 0 12 0;
#X connect 12 0 13 1;
#X connect 13 0 40 0;
#X connect 14 0 20 0;
#X connect 15 0 6 0;
#X connect 16 0 14 1;
#X connect 17 0 2 0;
#X connect 18 0 19 0;
#X connect 19 0 2 1;
#X connect 21 0 22 0;
#X connect 22 0 26 1;
#X connect 23 0 30 0;
#X connect 24 0 28 0;
#X connect 26 0 32 1;
#X connect 27 0 26 0;
#X connect 28 0 29 0;
#X connect 28 0 38 0;
#X connect 29 0 26 0;
#X connect 30 0 27 0;
#X connect 30 1 22 0;
#X connect 31 0 30 0;
#X connect 32 0 3 0;
#X connect 33 0 22 0;
#X connect 35 0 37 1;
#X connect 36 0 37 0;
#X connect 37 0 39 0;
#X connect 38 0 36 0;
#X connect 39 0 40 1;
#X connect 40 0 14 0;
#X restore 35 531 pd mycounter;
#X obj 193 393 t b b;
#X obj 64 6 r \$0-start;
#X obj 163 491 ext/pdkl-seq 1 0 1;
#X obj 137 711 *~ 1;
#X obj 177 535 t f f;
#X obj 154 619 spigot;
#X obj 245 557 > 0.01;
#X obj 156 653 t b f;
#X text 329 560 only let velocities bigger than 0 through;
#X obj 416 73 r \$0-seqlist;
#X msg 302 721 0;
#X obj 292 784 s \$0-start;
#X obj 247 606 && 1;
#X obj 315 605 r \$0-playrec;
#X text 431 609 1 = play \, 0 = rec;
#X obj 37 66 change 0;
#X obj 302 746 t f f;
#X obj 430 791 s \$0-startout;
#X obj 314 424 list store;
#X obj 416 98 list prepend append;
#X obj 416 123 list trim;
#X obj 402 280 r \$0-seqlistclear;
#X obj 402 305 sel 1;
#X obj 7 154 t f f;
#X obj 7 179 s \$0-seqstart;
#X msg 222 847 thresh 2.5 20 \, minvel 50 \, attack-frames 1;
#X obj 226 820 loadbang;
#X obj 53 654 +~;
#X obj 36 717 *~ 0.5;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 0 26 4;
#X connect 2 0 14 0;
#X connect 3 0 4 0;
#X connect 4 0 0 0;
#X connect 5 0 4 0;
#X connect 6 0 23 0;
#X connect 6 1 26 3;
#X connect 7 0 39 0;
#X connect 8 0 26 4;
#X connect 9 0 8 0;
#X connect 10 0 14 2;
#X connect 10 0 23 2;
#X connect 13 0 4 0;
#X connect 14 0 6 0;
#X connect 14 1 24 0;
#X connect 14 1 18 0;
#X connect 15 0 16 0;
#X connect 16 0 14 1;
#X connect 17 0 47 0;
#X connect 17 1 10 0;
#X connect 17 2 9 0;
#X connect 19 0 16 0;
#X connect 20 0 27 0;
#X connect 21 0 51 1;
#X connect 22 0 21 1;
#X connect 23 0 51 0;
#X connect 24 0 23 1;
#X connect 24 1 42 0;
#X connect 25 0 7 0;
#X connect 26 0 28 0;
#X connect 26 3 34 0;
#X connect 27 0 21 0;
#X connect 28 0 29 0;
#X connect 28 1 30 0;
#X connect 29 0 31 0;
#X connect 30 0 36 0;
#X connect 31 0 20 0;
#X connect 31 1 27 1;
#X connect 33 0 43 0;
#X connect 34 0 40 0;
#X connect 36 0 29 1;
#X connect 37 0 36 1;
#X connect 39 0 17 0;
#X connect 40 0 35 0;
#X connect 40 1 41 0;
#X connect 42 0 26 0;
#X connect 43 0 44 0;
#X connect 44 0 42 0;
#X connect 45 0 46 0;
#X connect 46 0 42 1;
#X connect 47 0 48 0;
#X connect 47 1 2 0;
#X connect 50 0 49 0;
#X connect 51 0 52 0;
#X connect 52 0 11 0;
#X connect 52 0 12 0;
#X restore 135 115 pd seq;
#X obj 121 358 *~ 1;
#X obj 187 367 *~ 1;
#X obj 328 171 vsl 15 128 0 1 0 0 empty empty empty 0 -9 0 10 #fcfcfc
#000000 #000000 0 1;
#X obj 346 110 loadbang;
#X msg 346 135 1;
#X obj 130 440 dac~ 1 2;
#X obj 222 40 r \$0-mainvol;
#N canvas 281 249 1183 619 rec 0;
#X obj 360 215 inlet;
#X obj 139 155 ext/dkbpmtoms;
#X msg 197 193 tempo \$1 msec;
#X obj 260 34 loadbang;
#X obj 131 88 f 120;
#X obj 359 42 r \$0-bpm;
#X obj 192 48 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000;
#X obj 472 114 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 0 1;
#X obj 469 384 r \$0-countin;
#X obj 469 409 f 0, f 5;
#X obj 311 500 list prepend 0;
#X obj 281 320 timer;
#X obj 341 294 t b f;
#X obj 315 376 pack f f;
#X obj 315 401 list prepend append;
#X obj 315 426 list trim;
#X obj 476 223 sel 1 0;
#X obj 313 470 list store;
#X msg 497 262 bang;
#X obj 466 291 t b b;
#X text 545 273 output;
#X text 543 303 clear stored list;
#X text 536 331 and reset timer;
#X text 326 193 input velocities;
#X obj 313 562 s \$0-perf;
#X text 39 544 format:;
#X text 35 563 countin;
#X text 28 592 then pairs of time (in beats) and velocity;
#X obj 472 134 && 0;
#X obj 571 87 r \$0-playrec;
#X text 559 58 1 = play \, 0 = rec;
#X obj 571 112 == 0;
#X obj 571 137 t f f;
#X obj 317 535 spigot 0;
#X text 389 540 don't send anything if in play mode;
#X obj 471 157 change 0;
#X obj 300 111 loadbang;
#X msg 300 136 tempo 1 msec;
#X obj 460 188 t f f;
#X obj 355 265 spigot 0;
#X obj 472 30 r \$0-seqstart;
#X obj 78 278 samplerate~;
#X obj 78 303 t b f;
#X obj 76 392 /;
#X obj 78 353 * 1000;
#X obj 295 349 - 0;
#X obj 170 381 /;
#X obj 131 113 t b f;
#X msg 78 328 384;
#X connect 0 0 39 0;
#X connect 1 0 2 0;
#X connect 1 0 46 1;
#X connect 2 0 11 0;
#X connect 3 0 4 0;
#X connect 4 0 47 0;
#X connect 5 0 4 0;
#X connect 6 0 4 0;
#X connect 7 0 28 0;
#X connect 8 0 9 0;
#X connect 9 0 10 1;
#X connect 10 0 33 0;
#X connect 11 0 45 0;
#X connect 12 0 11 1;
#X connect 12 1 13 1;
#X connect 13 0 14 0;
#X connect 14 0 15 0;
#X connect 15 0 17 0;
#X connect 16 0 19 0;
#X connect 16 1 18 0;
#X connect 17 0 10 0;
#X connect 18 0 17 0;
#X connect 19 0 11 0;
#X connect 19 1 17 1;
#X connect 28 0 35 0;
#X connect 29 0 31 0;
#X connect 31 0 32 0;
#X connect 32 0 28 1;
#X connect 32 1 33 1;
#X connect 33 0 24 0;
#X connect 35 0 38 0;
#X connect 36 0 37 0;
#X connect 38 0 16 0;
#X connect 38 1 39 1;
#X connect 39 0 12 0;
#X connect 40 0 7 0;
#X connect 41 0 42 0;
#X connect 42 0 48 0;
#X connect 42 1 43 1;
#X connect 43 0 46 0;
#X connect 44 0 43 0;
#X connect 45 0 13 0;
#X connect 46 0 45 1;
#X connect 47 0 41 0;
#X connect 47 1 1 0;
#X connect 48 0 44 0;
#X restore 23 53 pd rec;
#X connect 0 0 9 0;
#X connect 1 0 2 0;
#X connect 1 1 3 0;
#X connect 2 0 7 0;
#X connect 3 0 7 1;
#X connect 4 0 3 1;
#X connect 4 0 2 1;
#X connect 5 0 6 0;
#X connect 6 0 4 0;
#X connect 8 0 4 0;
